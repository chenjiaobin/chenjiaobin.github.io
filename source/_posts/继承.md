---
title: 继承
date: 2017-10-28 16:40:12
tags: 
- 浅拷贝
- 深拷贝
categories:
- 前端
- JS
- 继承之浅拷贝和深拷贝
---
js是面向对象的弱类型的语言，对于js来说也是一个非常大的特性之一，其实继承主要的实现方式也是通过原型链的继承来继承父类的属性和方法的，也可以通过拷贝来复制一份属于自己的属性和方法。接下来就让我们说说继承的主要的几种方式。<!--more-->
### 浅拷贝
浅拷贝就是直接将父类的属性和方法通过for..in来循环复制到子类，那么子类就拥有了父类的所有方法。
*缺点：*如果父类中有子对象或数组的时候，那么就会出行问题，需要通过递归来解决，这也是深拷贝到来的意义了，详细看代码
```
//浅拷贝
var parent={
  name:'chen',
  age:20,
  where:{born:pn,study:sz}
  arr:[1,2,4]
}
var child={}
//以下是主要的实现方法
function extend(parent,child){
  var child=child||{}; //如果child是undefind的情况下，那么将child设置为空对象
  for(var prop in parent){
    child[prop]=parent[prop];  //在子对象里面开始添加属性和方法
  }
  return child;
}
var obj=new extend(parent,child)
```
*注：*这里出现的问题是,当执行`obj.name`可以获取到chen,这是正确的，但是当执行`obj.where.born=china`或`obj.arr[0]=88`的时候，那么父类的born和arr也会被修改，因为在for..in里面复制给子类的是一个应用而已，所以子类和父类引用的是同一个对象和数组。那么就需要用深拷贝的方式来解决了。
### 深拷贝
深拷贝相比于浅拷贝就是，深拷贝会将父类的子对象或数组通过用递归的方式来复制到子对象里面去。代码如下
```
//深拷贝
var parent={
  name:'chen',
  age:20,
  where:{born:pn,study:sz}
  arr:[1,2,4]
}
var child={}
//以下是主要的实现方法
function extendDeep(parent,child){
  var child=child||{}; //如果child是undefind的情况下，那么将child设置为空对象
  for(var prop in parent){
    if(typeof parent[prop]==='object'){ //因为数组和对象都属于对象，所以只要检测到时object那么肯定是引用类型的值
      child[p]=(child[prop].constructor=='Array')?[]:{};
      entendDeep(parent[[prop],child[prop]);
    }
    child[prop]=parent[prop];  //在子对象里面开始添加属性和方法
  }
  return child;
}
var obj=new extend(parent,child)
```
这种拷贝的方式完美解决了浅拷贝的问题
### 函数继承
函数继承可以通过call或apply来实现继承父类的属性和方法
```
function parent(){
  this.name='chen';
  this.age={now:12};
}
function child(parent){
   parent.call(this); //相当于parent.parent()接着就可以调用里面的name和age了
   this.lang='english';
}
var obj=new child();
```
